# 		Optical definitions file
#
##                   Copyright (C) 2010 by                           ##
##     Ken Clardy, Carnegie Observatories, Pasadena California.      ##
#
!  ( Version 1.52 )  
#
# Either "!" or "#" introduces a comment (to end of line)
# An element section is introduced by a principal keyword; one of:
#  TELESCOPE COLIMATOR FOCUSER REIMAGER SCOPE <focal length>
#  GRATING GRISM <glass, angle; lines>
#  ANGLE <degrees> (formerly <axis, degrees>)
#  GLASS <refraction polynomial>
#  DETECTOR <size, mm> <pixels> <vigneting>
#  EGRISM  <lead_angle lead_glass gr_angle gr_den trail_glass trail_angle>
#
#  Each of these has its characteristic data following, in a form
#  dependent on the keyword itself.
#
#  The data following the keyword is:
#    Element name
#    Required values
#
#  Secondary lines are introduced by a "." character (not needed?)
#  The "." on secondary lines is now optional; it is removed if present.
#
#  Secondary keywords modify the last principal element; such things as:
#    FOCCURV <diopters>
#    SCALE  either mm/radian or radian/mm for focusing or colimating items
#    FIELD  <descriptor -- R/D/X/Y and size>
#    TMOD | RMOD | WMOD <polynomial>
#  These are followed by values defined by keyword
#  NOTE -- use of the secondary keyword SCALE overrides any item specified
#   as a focal length.  Other secondary keywords will similarly override
#   things specified as additional fields following a primary keyword.
#
#  Secondary keyword LINES is optional following a GRATING or GRISM
#  entry and contains lines/mm; otherwise this data is at the end of
#  the GRATING or GRISM line.
#
#  Secondary keyword ALIGNROT is optional following any disperser entry
#  and contains a rotational alignment angle in degrees.
#
#  The extended grism type has angles in degrees, density in lines
#  per millimeter, and glass names.  A name of "null" for a glass 
#  indicates that prism component is effectively absent.  A grating 
#  density of zero indicates the absence of the grating element.
#
#  For explanation of the <polynomial> distortions, see the file
#  ~/imacs/maskgen/optics/polysto.otl.  In general, the distortions
#  are dealt with as result *= (1.0 + C0*y^0 + C1*y^1 + C2*y^2 + ...);
#  where y is X*2 or wavl^-2 or temp.
#
#  Special element is "INSTRUMENT" which is a definition of a
#  set of elements.
#  The data is an arbitrarily long list of element names or keywords
#  Acceptable keywords are: TELESCOPE COLIMATOR FOCUSER REIMAGER SCOPE
#		GRATING GRISM ANGLE DETECTOR
#  and all keywords must be resolved into a real element for use.
#  Currently, only GRATING GRISM  are correctly parsed.
#  Will be using CAMERA as synonym for FOCUSER
#
#  All entries in the INSTRUMENT list must follow on the same line;
#  This is because they can be the same as keywords, and may be names which
#  are not otherwise recognized.
#
#
#
!
!     + - - - - - - - - - - - +
!     |   IMACS definitions   |
!     + - - - - - - - - - - - +
!
!  + - - - - - - +
!  |  Telescope  |
!  + - - - - - - +
!
TELESCOPE Magellan 71089.0
 FOCCURV 0 0.8090615
## fake.. . TMOD 0 2.682e-8
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Telescope Scale
!
!  Units:	mm/radian
!  Temperature:	8C
!  Wavelength:	0.55 microns
!  Field Angle:	0 arcmin
!
!  The scale was computed using the original optical design parameters,
!  and not the as-builts (since the ADC has not, at this time, been built).
!
!  Brian Sutin  2002-05-20
!
!
! SCALE 7.10899938e+04
!
!  2004-June-4
!  Information from Dressler, Oemler and Kelson asserts that the
!  scale in arc-seconds / millimeter is measured as 0.9993 of what
!  the above scale would yield.  This results in a slightly longer
!  focal length, as follows:
!
! SCALE  71139.8
!
!  2004-June-14
!  Further expeirence has indicated that a better value for the
!  focal length would be this:
!
SCALE  71161.1
!
!  It is anticipated that further measurements will be able to refine
!  this scale to a better value.
!  Also, in a future refinement, the atmospheric (differential) refraction
!  will be separately computed, and the scale will be adjusted to be
!  that of the telescope alone, without the refraction effect.
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
! Please Note:
!  There are (will be) two different telescope focal length and
!  distortion specifications.  One will refer to the Magellan Telescope
!  without the atmospheric dispersion compensator.  The other will 
!  include the dispersion compensator.  The IMACS instrument is designed
!  to always use the compensator, while the LDSS-2 instrument is designed
!  to not use it.  These telescope configurations will be known by
!  different names.
!
!  Also, it is expected that the second Magellan telescope will have
!  slightly different focus and distortion parameters, so there will be
!  another telescope configuration for it, when it is fully installed.
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Telescope Distortion
!
!  Units In:	radians^2
!  Temperature: 8C
!  Wavelength:	0.55 microns
!
!  Brian Sutin  2002-05-20
!
!
RMOD 2 0.0 2.67982953e+02 3.68633337e+05
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Telescope Wavelength Dependence
!
!  Units In:	microns^-2
!  Temperature: 8C
!  Wavelength:	0.55 microns at center
!
!  Note: the entire polynomial is multiplied by lambda^2 (or 1/x)
!
!  Brian Sutin  2002-05-21
!
WMOD 3 -8.90150538e-06 -4.66081555e-06 3.40769320e-06 -3.48315960e-07
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Telescope Temperature Dependence
!
!  Units In:	degrees C
!  Temperature: 8C at center
!  Wavelength:	0.55 microns
!
!  Brian Sutin  2002-05-21
!
TMOD 1 1.55108263e-07 -1.94048247e-08
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
#
#  During installation of IMACS, the Magellan telescope may be
#  operated without the Atmospheric Dispersion Compensator (ADC),
#  which significantly changes the telescope effective focal length
#  and distortion parameters.
#
#  To allow for this possible operation, we define a version of the
#  telescope without the ADC here.  This will NOT be the usual
#  mode of operation, it is provided for support only.
#
#  Note that, even with the ADC installed, this instrument value may
#  be needed for future data reduction, so it is kept here.  It is
#  not used for mask making.
#
TELESCOPE MagNoADC 70918.3
 FOCCURV 0 0.8090615
# That focal curvature is a "guess", same as with ADC
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Telescope Scale Without ADC and No Pullback
!
!  Units:       mm/radian
!  Temperature: 8C
!  Field Angle: 0 arcmin
!
!  Brian Sutin  2003-07-31
!
SCALE 7.09182776e+04
! SCALE  71373.0  ! Temporary for ldss use
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Telescope Distortion Without ADC and No Pullback
!
!  Units In:    radians^2
!  Temperature: 8C
!
!  Brian Sutin  2002-07-31
!
RMOD 2 0.0 1.75352765e+02 2.09007893e+05
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
#
#
#
!  + - - - - - - +
!  |  Colimator  |
!  + - - - - - - +
#
#
!
COLIMATOR IMACS_col 1638.3
 FOCCURV 0 -0.8090615
 FIELD R 321.54
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Collimator Scale
!
!  Units:	mm/radian
!  Temperature:	8C
!  Wavelength:	0.55 microns
!  Field Angle:	0 arcmin
!
!  Brian Sutin  2002-05-22
!
SCALE 6.10944999e-04
#  Should be reciprocal? (1636.808553)
#  And/Or it's really radian/mm ?
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Collimator Distortion
!
!  Units In:	mm^2
!  Temperature: 8C
!  Wavelength:	0.55 microns
!
!  Brian Sutin  2002-05-22
!
RMOD 2 0.0 -1.73482826e-07 -2.33443886e-13
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Collimator Wavelength Dependence
!
!  Units In:	microns^-2
!  Temperature: 8C
!  Wavelength:	0.55 microns at center
!  Field Angle:	7.5 arcmin
!
!  Note: the entire polynomial is multiplied by lambda^2 (or 1/x)
!
!  Brian Sutin  2002-05-28
!
WMOD 3 4.23932511e-04 -7.12992982e-04 2.29784020e-04 -1.62884252e-05
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Collimator Temperature Dependence
!
!  Units In:	degrees C
!  Temperature: 8C at center
!  Wavelength:	0.55 microns
!  Field Angle:	7.5 arcmin
!
!  Brian Sutin  2002-05-28
!
TMOD 1 3.56913676e-04 -4.46225237e-05
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
#
#
#
!  + - - - - - - - +
!  |  Long Camera  |
!  + - - - - - - - +
#
#
!
FOCUSER IMACS_long 641.8
 FOCCURV 0 0.0
 FIELD R 125.0
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Long Camera Scale
!
!  Units:	mm/radian
!  Temperature:	8C
!  Wavelength:	0.55 microns
!  Field Angle:	0 arcmin
!
!  Brian Sutin  2002-05-24
!
SCALE 6.40993657e+02
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Long Camera Distortion
!
!  Units In:	mm^2
!  Temperature: 8C
!  Wavelength:	0.55 microns
!
!  Brian Sutin  2002-05-24
!
# error = . RMOD 3 0.0 3.51494000e-01 -5.06451119e-01
RMOD 2 0.0 3.51494000e-01 -5.06451119e-01
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Long Camera Wavelength Dependence
!
!  Units In:	microns^-2
!  Temperature: 8C
!  Wavelength:	0.55 microns at center
!
!  Note: the entire polynomial is multiplied by lambda^2 (or 1/x)
!
!  Brian Sutin  2002-05-28
!
WMOD 3 -1.68638023e-03 2.05850032e-03 -6.72588738e-04 6.14129125e-05
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Long Camera Temperature Dependence
!
!  Our current assumption is that we will correct thermal effects
!  by moving the L05 element and refocusing.  Thus, the long camera
!  model requires no thermal terms.
!
!  Brian Sutin  2002-05-24
!
TMOD 0 0.0
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
#
#
#
!  + - - - - - - - +
!  | Short Camera  |
!  + - - - - - - - +
#
#
FOCUSER IMACS_short 355.6
 FOCCURV 0 0.0
 FIELD R 125.0
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Short Camera Scale
!
!  Units:	mm/radian
!  Temperature:	8C
!  Wavelength:	0.55 microns
!  Field Angle:	0 arcmin
!
!  Brian Sutin  2002-05-22
!
SCALE 3.55148487e+02
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Short Camera Distortion
!
!  Units In:	mm^2
!  Temperature: 8C
!  Wavelength:	0.55 microns
!
!  Brian Sutin  2002-05-22
!
RMOD 2 0.0 2.78711536e-01 3.12884431e-01
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Short Camera Wavelength Dependence
!
!  Units In:	microns^-2
!  Temperature: 8C
!  Wavelength:	0.55 microns at center
!  Field Angle:	7.5 arcmin at telescope
!
!  Note: the entire polynomial is multiplied by lambda^2 (or 1/x)
!
!  Brian Sutin  2002-05-28
!
WMOD 3 -1.11437897e-03 2.17379430e-03 -7.83277567e-04 6.88543592e-05
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Short Camera Temperature Dependence
!
!  Units In:	degrees C
!  Temperature: 8C at center
!  Wavelength:	0.55 microns
!  Field Angle:	7.5 arcmin at telescope
!
!  Brian Sutin  2002-05-28
!
TMOD 0 -1.00875439e-04 1.31117689e-05
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!   IMACS Angle (for long camera)
!
!! ANGLE IMACS_angle 1 225.0
! Used to be a polynomial; now just a constant
ANGLE IMACS_angle  225.0
!  This is the former CAMERA_ANGLE from IMACS optics code
! ANGLE IMACS_angle  224.0
!  Debug test of a slightly different angle...
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!    Gratings for IMACS
!
GRATING IMACS_150A 150.0
!
GRATING IMACS_300A 300.0
!
GRATING IMACS_600A 600.0
!
GRATING IMACS_1200A 1200.0
!
GRATING IMACS_direct 0.0
# Make sure code for grating uses 0 lpmm as a simple mirror...
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!   Grisms for IMACS
!
! .. Glass definitions
!
GLASS Fused_Silica  5 -9.5251763e-03 2.1045254e+00 8.5795589e-03 1.2770234e-04 -2.2841020e-06  1.2397250e-07 
!
GLASS  BSL7Y    5  -1.0082346e-02  2.2699882e+00  1.1067229e-02  3.8263836e-05  1.7794939e-05  -8.9762718e-07
# (For grism 200)
!
GLASS  S-LAL12  5  -8.7787656e-03  2.7589457e+00  2.1173055e-02 -4.7262367e-04  9.6870749e-05  -4.0576545e-06
# (For grism 300)
!
GLASS  PBH53W   5  -1.05551124e-02  3.25008969e+00  4.78517126e-02  3.23076820e-03  -1.59616205e-04  2.64226220e-05
# (For grism 600)
!
GLASS  SBAL42  5  -9.71898076e-03  2.46783077e+00  1.37566633e-02  2.25905778e-04  3.65449767e-06 -2.90831130e-07
# (For grism 150)
!
GLASS  PBL1YT  5  -8.40389601e-03  2.35045675e+00  1.57043674e-02  4.58760635e-04 -1.22025354e-05  1.99484800e-06
# (For Grism 300R) From refraction table
!
GLASS  PBL1Y  5  -8.42070244e-03  2.35051247e+00  1.56648206e-02  4.69195535e-04 -1.33043757e-05  2.02936529e-06
# (For Grism 300R) From visual Sellmeier coefficients
!
GLASS  PBL1YR  5  -8.80935177e-04  2.35026475e+00  1.59436229e-02  3.67333824e-04  1.63529515e-08  1.37058442e-06
# (For Grism 300R) From I.R. Sellmeier coefficients
!
!
! .. Grism definitions
!
GRISM IMACS_grism_200  BSL7Y  15.0  200.0
!
GRISM IMACS_grism_300  S-LAL12  17.5  300.0
!
GRISM IMACS_grism_600  PBH53W  34.0  600.0
!
GRISM IMACS_grism_150  SBAL42  10.8  150.0
!
GRISM IMACS_grism_300R  PBL1Y  26.7  300.0
!
!
# Dummy definitions for testing...
!
GRISM IMACS_grism_1  Fused_Silica 17.666  300.0
!
!  Define a direct grism, mathematically - it's not there
GLASS  Clear  1 0.0 1.0
! GRISM IMACS_direct_grism  Clear 0.0 0.0
EGRISM IMACS_direct_grism  0.0 null  0.0 0.0  null 0.0
!
#
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
#  Special IMACS LDP prism
!
!  Details from Scott Burles e-mail of 3/22/2007
!
! The prism has two very special glass types used:
GLASS  S-FSL5Y  5  -9.39871086e-03  2.18860909e+00  9.04959459e-03  1.31858938e-04 -3.02303721e-06  2.26496800e-07
GLASS  PBM2Y  5  -8.80256707e-03  2.55511019e+00  2.25491814e-02  9.01899989e-04 -3.24315072e-05  5.18629370e-06
# The polynomials were derived by the refpols utility.
!
! It uses a 3 element design, modeled as two consecutive egrism elements,
! connected as an instrument.
! These are prisms only, with no grating (density 0)
#  EGRISM  <lead_angle lead_glass gr_angle gr_den trail_glass trail_angle>
#
egrism  LDP_part_1  -2.25 S-FSL5Y 8.25 0.0 PBM2Y -8.25
egrism  LDP_part_2  -8.25 S-FSL5Y 2.25 0.0 null
instrument  LDP_Prism  LDP_part_1  LDP_part_2
!
!  Net result is a low dispersion spectrum.
!  Center wavelength computed as 6031.40
!
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Echelle for IMACS  (Multi-Object Echelle == M.O.E.)
!
Echelle  MOE  Fused_Silica  245.0
# First prism surface at 5.198, -9.358, -22.592
# Second prism surface at 0.436, 9.566, 23.093
# Grating normal at  -3.810, -12.350, 21.400 in -x,z,-y system
# Grating groove is 158.131, -12.603, 20.877 in -x,z,-y system
# Above values refer to original design, which has been revised.
  Prism1   0.20792 -0.37432 -0.90368
  Prism2   0.01744  0.38264  0.92372
#  Grating orientation revised 2006-March-16
#  Grating orientation revised again 2014-May-13 to relect new grating.
  Gnormal  0.152386838 -0.856013976 -0.493982109
  Gdispv   0.00297  0.50023  -0.86589
# The -Z direction on the normal causes reflection of beam.
# Positive orders going in positive Y direction here
  Lines  245.0
# Tilt value is tilt of grating about ruling lines
# with positive values in the direction of greater dispersion
! GTilt -3.15
!
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
#
#  GISMO field splitter
#    Data from Gladders, January 2010
#
#  The data here are the second as built definition of GISMO, based
#  on data from Gladders, with the needed polynomials.
#  These polynomials use  < #define POLY CConj >  in mgfeats.h
#  to compile the supporting software.
#
!
subfield  GISMO  16
!
!  Quadrant 1 limits (+x, +y)  (slice 2x = 0-3)
  limit   0    0.0660   39.5760    1.2940    9.7620
  limit   1    0.1060   36.8860   10.2320   18.7020
  limit   2    0.0260   31.4360   19.3120   27.7920
  limit   3    0.0560   20.7560   28.1920   36.7720
#  limit    0        -0.2340      39.2760       0.9940       9.4620
#  limit    1        -0.1940      36.5860       9.9320      18.4020
#  limit    2        -0.2740      31.1360      19.0120      27.4920
#  limit    3        -0.2440      20.4560      27.8920      36.4720
!
!  Quadrant 2 limits (-x, +y)  (slice 1x = 4-7)
  limit   4  -39.8940   -0.3540    1.5020    9.6220
  limit   5  -36.9040   -0.4040   10.2320   18.7520
  limit   6  -31.6940   -0.5540   19.2620   27.7220
  limit   7  -21.2740   -0.5340   28.1420   36.6720
#  limit    4       -40.1940      -0.6540       1.2020       9.3220
#  limit    5       -37.2040      -0.7040       9.9320      18.4520
#  limit    6       -31.9940      -0.8540      18.9620      27.4220
#  limit    7       -21.5740      -0.8340      27.8420      36.3720
!
!  Quadrant 3 limits (-x, -y)  (slice 3x = 12-15)
  limit  12  -39.8740   -0.2740   -8.7880   -0.4380
  limit  13  -36.9740   -0.3940  -17.7380   -9.3180
  limit  14  -31.8040   -0.3840  -26.8780  -18.2980
  limit  15  -20.9540   -0.4340  -35.8080  -27.5280
#  limit   12       -40.1740      -0.5740      -9.0880      -0.7380
#  limit   13       -37.2740      -0.6940     -18.0380      -9.6180
#  limit   14       -32.1040      -0.6840     -27.1780     -18.5980
#  limit   15       -21.2540      -0.7340     -36.1080     -27.8280
!
!  Quadrant 4 limits (+x, -y)  (slice 4x = 8-11)
  limit   8    0.0660   39.6360   -8.7880   -0.5580
  limit   9   -0.0040   36.5460  -17.7480   -9.3180
  limit  10    0.0960   31.4860  -26.6780  -18.2480
  limit  11    0.6060   21.0460  -35.8080  -27.2780
#  limit    8        -0.2340      39.3360      -9.0880      -0.8580
#  limit    9        -0.3040      36.2460     -18.0480      -9.6180
#  limit   10        -0.2040      31.1860     -26.9780     -18.5480
#  limit   11         0.3060      20.7460     -36.1080     -27.5780
!
#
#  Transforms for GISMO
#
#  Data from Gladders, January 2010.
#  Requires defining POLY to be CConj in mgfeats.h
#
#
!  Quadrant 1 transforms (+x, +y) (2x - 0-3)
 TRAN  0  6 87.38300 91.73097 -0.9927889 -0.01200406 -0.01158974 0.01506597 8.164258e-05 -0.0002040982 0.0001024666 -8.142508e-05 2.316770e-05 1.004668e-06 1.197958e-05 -2.591646e-07
 TRAN  1  6 45.63563 122.0584 -1.004279 0.04902716 0.01352511 -0.04108928 -0.002232611 -0.0007171873 -0.001070839 0.0006909676 2.482538e-05 4.584105e-07 1.132776e-05 2.964603e-07
 TRAN  2  6 130.5895 129.2850 -0.9238654 0.09795484 -0.03985779 -0.07695478 -0.002226639 -3.981036e-05 -0.0009677662 0.001058914 3.974978e-06 9.171249e-07 1.536785e-06 2.397672e-07
 TRAN  3  6 158.5358 97.64438 -0.9482862 0.03694484 -0.02015971 -0.03258186 -0.0005269995 0.001597285 -0.0004509649 -0.0002134700 -1.624205e-05 9.682672e-07 -6.391158e-06 4.153969e-06
# TRAN  0  6 86.88214 90.92488 -0.9922426 -0.01398574 -0.01151571 0.01573852 0.0001175305 -0.0001204217 4.829713e-05 -0.0001163484 2.276682e-05 -5.029291e-07 1.319106e-05 1.172408e-06
# TRAN  1  6 44.99493 121.2588 -0.9998429 0.04436595 0.01804385 -0.04137293 -0.002293440 -0.0004864745 -0.001277821 0.0005649299 2.477374e-05 -2.589367e-06 1.298841e-05 3.103538e-06
# TRAN  2  6 130.0358 128.4637 -0.9239348 0.09513426 -0.04203124 -0.08000165 -0.002271741 1.243787e-06 -0.001122081 0.001259061 3.788192e-06 4.147308e-08 4.780060e-06 3.639026e-07
# TRAN  3  6 157.7928 97.09223 -0.9431055 0.01265763 0.009388896 -0.04728077 9.183750e-05 0.001929562 -0.001185449 -0.0009334382 -2.142420e-05 5.852638e-06 -1.130640e-05 1.371715e-05
#
#
!  Quadrant 2 transforms (-x, +y) (1x - 4-7)
 TRAN  4  6 -87.51675 90.52910 -0.9921173 0.01415872 -0.01249204 -0.01614431 -8.375670e-05 -3.517756e-05 -0.0001537261 -0.0001522178 2.345934e-05 1.556450e-06 1.184013e-05 -2.086942e-06
 TRAN  5  6 -45.07915 122.3606 -1.010217 -0.04604823 0.007767395 0.03805821 0.002069677 -0.0007028111 0.0009777484 0.0007727914 2.465731e-05 -3.537500e-08 1.181359e-05 7.736408e-07
 TRAN  6  6 -130.9863 130.1797 -0.9254356 -0.09261198 -0.03434709 0.07080306 0.002169247 -1.741142e-05 0.0009202247 0.0009472811 4.207150e-06 -9.995411e-07 8.794452e-07 -4.072798e-07
 TRAN  7  6 -159.5086 98.01623 -0.9433166 -0.03417168 -0.02798690 0.03560204 0.0004155427 0.001783607 0.0004016394 0.0001426887 -1.826471e-05 -1.614193e-06 -3.256201e-06 -2.179450e-06
# TRAN  4  6 -87.97841 89.85070 -0.9900561 0.008190169 -0.01511480 -0.01517687 0.0001349907 -0.0003777792 -0.0002361461 -1.133988e-05 2.800300e-05 -3.484223e-06 1.101351e-05 6.296033e-07
# TRAN  5  6 -45.49416 121.6474 -1.005210 -0.04249678 0.01171811 0.03709234 0.002112461 -0.0005643810 0.001067096 0.0006480945 2.408368e-05 9.012491e-07 1.196058e-05 -7.976753e-07
# TRAN  6  6 -131.4167 129.4074 -0.9240038 -0.09789763 -0.04175307 0.07625655 0.002246145 -0.0001348858 0.0009379448 0.001203173 4.865654e-06 -9.815651e-07 3.286378e-06 2.137311e-07
# TRAN  7  6 -160.1416 97.86071 -0.9351731 -0.07422658 0.01673932 0.05276077 0.001578962 0.001638560 0.001362249 -0.0007467364 -1.340652e-05 8.421638e-06 -7.067621e-06 -1.422664e-05
#
#
!  Quadrant 4 transforms (+x, -y) (4x - 8-11)
 TRAN  8  6 87.26602 -88.69976 -0.9886322 0.01038528 -0.01399829 -0.01352182 2.081557e-05 0.0001589058 0.0001164367 1.892785e-05 2.447425e-05 -1.830344e-06 1.238811e-05 6.978320e-07
 TRAN  9  6 44.70217 -121.2521 -1.004682 -0.04208972 0.01112336 0.03152223 -0.002107061 0.0005848549 -0.0009399636 -0.0006188502 2.462743e-05 -6.710594e-08 1.099899e-05 7.047721e-07
 TRAN 10  6 129.7381 -127.6116 -0.9247060 -0.08957540 -0.03558159 0.06857754 -0.002250507 -0.0001171794 -0.0009857481 -0.0009857784 3.118372e-06 8.107364e-07 1.447881e-06 -1.464824e-06
 TRAN 11  6 158.4181 -95.42178 -0.8932193 -0.01052321 -0.001652324 0.09888989 -0.0008820139 -0.003034339 -0.002472867 -0.0001853223 -2.557961e-05 1.058420e-05 6.611055e-06 -1.934759e-05
# TRAN  8  6 86.60782 -89.51047 -0.9858528 0.01428364 -0.01404233 -0.01806678 -0.0001209007 3.984454e-05 0.0002933255 0.0001398249 2.688535e-05 1.673691e-06 8.653985e-06 -9.569097e-07
# TRAN  9  6 44.10824 -121.9080 -1.003518 -0.04019018 0.01237071 0.03595182 -0.002060454 0.0004790353 -0.001068805 -0.0006614930 2.280482e-05 1.676385e-06 1.219894e-05 1.173840e-07
# TRAN 10  6 129.2033 -128.2479 -0.9297224 -0.09424926 -0.03379036 0.06533086 -0.002252567 7.783769e-05 -0.0009009975 -0.0008412494 5.284040e-06 -1.889145e-07 -3.400084e-07 -1.536836e-06
# TRAN 11  6 157.2547 -95.77223 -0.8965938 0.007309001 -0.03113133 0.04653019 -0.0001774014 -0.003130032 -0.0007768731 -0.0004304197 -2.936259e-05 2.932584e-06 2.561083e-06 -4.055878e-06
#
#
!  Quadrant 3 transforms (-x, -y) (3x - 12-15)
 TRAN 12  6 -88.09991 -89.19103 -0.9973320 -0.01280940 -0.01266635 0.01565169 -5.461142e-05 0.0001319375 -0.0001036399 3.887250e-05 2.489300e-05 9.563823e-07 1.273380e-05 -4.659716e-07
 TRAN 13  6 -45.01567 -120.6613 -1.005272 0.03700518 0.01400515 -0.03103242 0.002051413 0.0005186644 0.001018830 -0.0005183601 2.372556e-05 -2.118527e-07 1.111451e-05 1.197671e-06
 TRAN 14  6 -130.1941 -128.1851 -0.9224160 0.08359694 -0.03159363 -0.06521497 0.001991313 5.833382e-05 0.0008184865 -0.0008200424 3.308010e-06 3.553996e-06 -9.129070e-07 -3.143520e-08
 TRAN 15  6 -160.2243 -95.80169 -0.9452496 0.04568746 -0.02118843 -0.02628132 0.001038185 -0.001438663 0.0002254494 5.981749e-05 -1.184526e-05 -3.949063e-06 -4.936167e-06 9.701206e-07
# TRAN 12  6 -88.54224 -89.72011 -0.9954987 -0.01005753 -0.01347038 0.01557302 -7.301413e-05 0.0002155678 -0.0001116503 0.0001608608 2.463425e-05 1.898062e-06 1.155794e-05 1.658456e-06
# TRAN 13  6 -45.52668 -121.2546 -1.008274 0.04081344 0.008345396 -0.03674704 0.001953551 0.0006889211 0.0009631861 -0.0007319715 2.365415e-05 1.864199e-06 1.188992e-05 -1.337721e-06
# TRAN 14  6 -130.4526 -128.4088 -0.9085800 0.09306286 -0.03404964 -0.06350449 0.002424851 -0.0001544862 0.0006974263 -0.0007958065 4.102789e-06 -2.538404e-06 -2.006455e-06 -7.285404e-07
# TRAN 15  6 -159.0729 -96.64841 -0.9393528 0.01158032 0.01996296 0.04856896 0.0003222122 -0.001964222 -0.001394321 0.001805588 -1.775926e-05 -4.790807e-07 -2.565683e-05 -8.271168e-06
#
#
#
#
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#
!
#
#  Long camera detector definition
#
! Detector definition of field is  FIELD n x1 x2  y1 y2
! Where n is N (normal) S (nod/shuf) or D (default)
! and x1 x2 and y1 y2 are limits of coordinates.
#
DETECTOR IMACS_CCDL 125.0 8192 100.0
! FIELD X 125.0 Y 125.0
! PIXELS X 8192 Y 8192
!
!
#  FIELD  S  -61.7  61.3   -62.3  62.7
#  FIELD  D  -61.7  61.3   -62.3  62.7
# Actually for short camera, use default instead
!
!  Gaps for long camera
!
# Long camera gaps are not precisely known, and these are
# believed to be an older short camera set.
# GAP  imacs_l 0  Left_Gap  -32.6 -32.6  -31.4 -31.4
# GAP  imacs_l 0  Mid_Gap    -1.1  -1.1   -0.1  -0.1
# GAP  imacs_l 0  Right_Gap  30.6  30.6   31.7  31.7
! ... inst 1=n/s name  left edge top, bot  right edge top, bot
!
# GAP  imacs_l 1  Mid_Gap    -0.3  -0.3    0.6   0.6
# All these gaps are actually for the short camera
!
#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#
#
#  Special long camera with special gaps to implement the
#  GISMO Macro Nod and Shuffle feature
#
!
DETECTOR IMACS_CCDLX 125.0 8192 100.0
!
! This is a guess at the field, use actual values if possible
!
  FIELD  D  -62.22  62.22   -62.5  62.5
  FIELD  S  -62.22  62.22   -62.5  62.5
!  Field has orientation, X limits, Y limits
!  Orientation is D = default, N = Normal, S = N&S
!
!  Gaps for long camera when doing macro n&s
!
! These special gaps are bounded at 1/7 of each detector
! dimension on each side of the array.  Values may be
! adjusted to the actual detector positions.
!
! Long dimension of detector is about 62 mm,
! and the center gap about 0.4 mm, giving about 0.2 to 62.2 mm
! position on both sides.
! 1/7 of 62 rounds to 8.86 mm, so we make the dividing lines
! at 0.2 + n x 8.86 -- yielding these locations:
!  0.20, 9.06,  17.92, 26.78,  35.64, 44.50,  53.36, 62.22
! These should be adjusted for the actual chip positions from
! data reduction pixel locations when available.
! This initial guess should be close.  KDC 2008-12-16
!
GAP  imacs_xl 1 Left_6  -62.22 -62.22  -53.36 -53.36
GAP  imacs_xl 1 Left_4  -44.50 -44.50  -35.64 -35.64
GAP  imacs_xl 1 Left_2  -26.78 -26.78  -17.92 -17.92
GAP  imacs_xl 1 Left_0   -9.06  -9.06   -0.20  -0.20
!
GAP  imacs_xl 1 Right_0   0.20  0.20   9.06  9.06
GAP  imacs_xl 1 Right_2  17.92 17.92  26.78 26.78
GAP  imacs_xl 1 Right_4  35.64 35.64  44.50 44.50
GAP  imacs_xl 1 Right_6  53.36 53.36  62.22 62.22
!
! The GAP line defines gap edges as follows
! ... inst 1=n/s name  left edge top, bot  right edge top, bot
!
GAP  imacs_xl 1 Center  -0.20 -0.20   0.20  0.20
! Center gap is not necessary, but actually exists on the detector
! (as with others, revise to meet actual locations)
!
!  As an alternate, the inner virtual gaps above could be extended
!  at the right side of Left_0 and the left side of Right_0 to
!  the center at 0.00 instead of having a center gap.
!
# END of special GISMO macro n&s detector definition
!
#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#
#
#  Short camera detector definition
#
!
! When used on the short camera, the IMACS detector
! actually has a vignetting radius, as shown here...
DETECTOR IMACS_CCDS 125.0 8192 82.0
!
!
!  Revised detector data from Oemler 2008/8-21
!  for the new detector installed 2008/3+
!
  FIELD  N  -63.7  62.0   -62.5  60.1
  FIELD  D  -63.7  62.0   -62.5  60.1
!
#  The values for the fixed detector and rotated disperser
# are given by the normal orientation values, rotated by putting x
# to y and y to -x coordinates.
!
  FIELD  S  -60.1  62.5   -63.7  62.0
!
!
!  Gaps for short camera
!
GAP  imacs_s 0  Left_Gap  -33.3 -33.65  -31.8 -32.15
GAP  imacs_s 0  Mid_Gap    -1.4  -1.75   0.12  -0.25
GAP  imacs_s 0  Right_Gap  30.5  30.2   32.0  31.65
! ... inst 1=n/s name  left edge top, bot  right edge top, bot
# Rotate the short camera normal orientation gap for n+s use:
GAP  imacs_s  1  Mid_Gap   0.85  0.4    2.0  1.6
!
#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#!!!!#
#
#   Instrument definitions for IMACS use
#
!
INSTRUMENT  IMACS_lc  IMACS_col GRATING IMACS_angle IMACS_long IMACS_CCDL
INSTRUMENT  IMACS_sc  IMACS_col GRISM              IMACS_short IMACS_CCDS
!
! The IMACS instrument set-up's could be defined in a modular
! fashion as follows:
INSTRUMENT  IMACS_grating  GRATING  IMACS_angle IMACS_long IMACS_CCDL
INSTRUMENT  IMACS_grism  GRISM  IMACS_short IMACS_CCDS
INSTRUMENT  IMACS_lc2  IMACS_col IMACS_grating
INSTRUMENT  IMACS_sc2  IMACS_col IMACS_grism
!
!  We can define the total IMACS direct instrument
INSTRUMENT  IMACS_ld  IMACS_col IMACS_direct IMACS_angle IMACS_long IMACS_CCDL
INSTRUMENT  IMACS_sd  IMACS_col IMACS_short IMACS_CCDS
!
! Special definitions for GISMO aperature feature, direct GISMO masks
INSTRUMENT  IMACS_gdl  IMACS_col IMACS_direct IMACS_angle IMACS_long IMACS_CCDL
# INSTRUMENT  IMACS_gds  IMACS_col IMACS_short IMACS_CCDS
# Above is not needed as a special instrument by intgui.c (at present)
!
INSTRUMENT  IMACS_longcam  Magellan IMACS_ld
INSTRUMENT  IMACS_shortcam  Magellan IMACS_sd
!
! Special instrument definition to implement GISMO Macro Nod & Shuffle
INSTRUMENT  IMACS_xlc  IMACS_col GRATING IMACS_angle IMACS_long IMACS_CCDLX
! This is just imacs f/4 with a different detector module,
! and that is defined with the normal one above.
!
!  Test definitions for IMACS...
#
#
!  Fake colimator to test coeficients
!
COLIMATOR IMACS_tcol 1638.3
 FOCCURV 0 -0.8090615
 FIELD R 321.54
SCALE 6.10944999e-04
! RMOD 2 0.0 -1.73482826e-07 -2.33443886e-13  ! Real coeficients
! RMOD 2 0.0 -1.73482826e-07  2.33443886e-13
RMOD   2 0.0 -1.73482826e-07 -2.33443886e-13
! Changing sign of last term has less than 1 micron effect at 20 mm,
!  and 60 microns effect at 200 mm input.
WMOD 3 4.23932511e-04 -7.12992982e-04 2.29784020e-04 -1.62884252e-05
TMOD 1 3.56913676e-04 -4.46225237e-05
#
#
! Fake long camera to test coeficients
!
FOCUSER IMACS_tlong 641.8
 FOCCURV 0 0.0
 FIELD R 125.0
SCALE 6.40993657e+02
! RMOD 2 0.0 3.51494000e-01 -5.06451119e-01  ! Real coeficients
! RMOD 2 0.0 3.51494000e-01 -10.06451119e-01
RMOD   2 0.0 3.51494000e-01 -10.12902239e-01
! Changing last term 50% has no effect at 20 mm, 9 microns at 200 mm.
WMOD 3 -1.68638023e-03 2.05850032e-03 -6.72588738e-04 6.14129125e-05
TMOD 0 0.0
#
#
#
INSTRUMENT  IMACS_xd  IMACS_tcol IMACS_direct IMACS_angle IMACS_tlong IMACS_CCDL
#
#  Test instrument specifications
INSTRUMENT  test_col  Magellan  IMACS_col
INSTRUMENT  test_sc   Magellan  IMACS_col  IMACS_short
!
!
! (End of IMACS definitions)
!
!
!
!	+ - - - - - - - - - - - +
!	|    Clay Telescope	|
!	+ - - - - - - - - - - - +
!
!  The telescope is quite similar to the Baade telescope, however it
!  has a different effective focal length, and no ADC.
!
TELESCOPE Mag2NoADC 71475.8
! The presumed scale of the Clay telescope is used here...
 FOCCURV 0 0.8090615
#focal curvature is as for ADC since its the physical mask curvature that counts
# But, that focal curvature is not used...
! Using distortion from the Sutin values for the Bade telescope...
 RMOD 2 0.0 1.75352765e+02 2.09007893e+05
 TMOD 1 1.55108263e-07 -1.94048247e-08
!
!
!  The Clay Telescope should be named "Magellan2", and that better
!  name is introduced here, so it may be used in the software to
!  identify the second telescope.  Currently a Synonym for Mag2NoADC
!
TELESCOPE Magellan2 71475.8
 SCALE  71475.8
! The scale was measured during the LDSS-3 commissioning run
 FOCCURV 0 0.8090615
! Focal Curvature is copied from Magellan currently, and is yet unused
! Using distortion from the Sutin values for the Bade telescope...
 RMOD 2 0.0 1.75352765e+02 2.09007893e+05
 TMOD 1 1.55108263e-07 -1.94048247e-08
!
!
!
!	+ - - - - - - - - - - - +
!	|   Glass definitions	|
!	+ - - - - - - - - - - - +
!
GLASS Simple_glass 1 0.0 2.175625
! Results in index of 1.475 for all wavelengths...
!
! From Sutin on 03/12-19:
! The Schott coefficients for someones BK7 are:
! 2.2718929e+00  -1.0108077e-02   1.0592509e-02   2.0816965e-04  -7.6472538e-06   4.9240991e-07
!
GLASS  BK7  5  -1.0108077e-02  2.2718929e+00  1.0592509e-02  2.0816965e-04 -7.6472538e-06  4.9240991e-07
!
!
!     + - - - - - - - - - - - +
!     |   LDSS-2 definitions  |
!     + - - - - - - - - - - - +
!
! Most of the LDSS-2 things are now obsolete.
! Un-used LDSS-2 items are now commented out.
! Later, they will be totally removed.
!
! We are using BK7 as a guess for the LDSS grisms.  We also make
!  the angles agree with the non-deviated wavelengths.
! See:  grisangl.c  KDC  03/12-24
!
!!GRISM LDSS_Low        BK7   9.155  150.0   ! 5500
!EGRISM LDSS_Low     0.0   BK7   9.155  150.0  null ! 5500
!!GRISM LDSS_Med_blue   BK7  16.719  300.0   ! 5000
!EGRISM LDSS_Med_blue  0.0 BK7  16.719  300.0  null ! 5000
!!GRISM LDSS_Med_red    BK7  20.404  300.0   ! 6000
!EGRISM LDSS_Med_red   0.0 BK7  20.404  300.0  null ! 6000
!!GRISM LDSS_High_blue  BK7  36.125  600.0   ! 5000
!EGRISM LDSS_High_blue 0.0 BK7  36.125  600.0  null ! 5000
! GRISM LDSS_direct_grism  Clear 0.0 0.0
EGRISM LDSS_direct_grism  0.0 null  0.0 0.0  null 0.0
! The direct grism is referred to, keep it.
!
!DETECTOR  LDSS_CCD 49.15 4096 50.0
!! FIELD X 49.15 Y 49.15
!! PIXELS X 4096 Y 4096
!COLIMATOR LDSS2_col 770.0
!  scale  1.2987e-3
! FIELD R 70.0
!FOCUSER LDSS2_cam 140.0
!  scale 140.0
! FIELD R 70.0
!!
!INSTRUMENT LDSS2    LDSS2_col  GRISM  LDSS2_cam  LDSS_CCD
!INSTRUMENT LDSS2_d  LDSS2_col  LDSS_direct_grism  LDSS2_cam  LDSS_CCD
!! (End of LDSS-2 definitions
!
!
!-- Section by Mike Gladders for new LDSS instrument;
! some things here have been edited for style and substance.
!  Line endings have been regularized;  some comments have
!  been multi-lined, and others added.  Some extra commentary
!  has been removed.
!
!     + - - - - - - - - - - - +
!     |   LDSS-3 definitions  |
!     + - - - - - - - - - - - +
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!     new parameters for ldss-3 follow below     !!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!  Grisms from old LDSS2 instrument
!
!  The LDSS grisms are installed "upside down" with respect to the
!  coordinate system and angle conventions used in IMACS.  To fix
!  this, an alignment rotation value of 180 degrees is applied to
!  each such grism, effectively rotating it by that amount about
!  the central optical axis.  Another method is to use a negative
!  prism angle, but that requires a negative grating order too,
!  and that would upset some internal program logic.
!
# EGRISM name <lead_angle lead_glass gr_angle gr_den trail_glass trail_angle>
! GRISM LDSS3_Low           BK7    9.600  150.0
EGRISM LDSS3_Low        0.0   BK7    9.600  150.0  null
 ALIGNROT  180.0
! GRISM LDSS3_Med_blue      BK7   19.500  300.0
EGRISM LDSS3_Med_blue    0.0  BK7   19.500  300.0  null
 ALIGNROT  180.0
! GRISM LDSS3_Med_red       BK7   19.500  300.0
EGRISM LDSS3_Med_red    0.0   BK7   19.500  300.0  null
 ALIGNROT  180.0
! GRISM LDSS3_High_blue     BK7   30.200  600.0
EGRISM LDSS3_High_blue   0.0  BK7   30.200  600.0  null
 ALIGNROT  180.0
!
!  New grisms constructed for LDSS-3 instrument
!
GLASS  S-LAL7  5  -1.0513873e-2 2.6805890e0 1.7140176e-2 8.5811085e-5 2.1348318e-5 -7.4091988e-7
!
# EGRISM name <lead_angle lead_glass gr_angle gr_den trail_glass trail_angle>
# -- angles refer to coordinate system, hence are absolute not relative.
#
EGRISM LDSS3_VPHred  -24.00   S-LAL7     0.00  665.0   S-LAL7    24.00
 ALIGNROT  180.8
EGRISM LDSS3_VPHblue -24.00   S-LAL7     0.00 1090.0   S-LAL7    24.00
 ALIGNROT  180.2
EGRISM LDSS3_VPHall  -16.30 Fused_Silica 0.00 400.0 Fused_Silica 16.30
 ALIGNROT  180.0
# The alignment rotation values above are from Oemler,
# e-mail of 2005/10-18; used for fitting actual data.
# Also, lpmm for VPHred has been changed from 660 to 665.
#
#  End new 2-prism grisms.
#
# Make 3 detectors for the three modes. This gets around the
# problem of having to deal with the IMACS logic
#   First:  Normal mode (tall)
DETECTOR  LDSS3_CCD_NORMAL 61.44 4096 60.00
  FIELD  D  -17.11  13.48   -29.43  31.89
#   Second:  Micro N&S mode (fat)
DETECTOR  LDSS3_CCD_MICRO 61.44 4096 60.00
  FIELD  D  -32.94  28.38   -16.245  14.355 
#   Third:  Macro N&S mode (small)
DETECTOR  LDSS3_CCD_MACRO 61.44 4096 60.00
  FIELD  D  -12.45  7.92  -16.245  14.355
! FIELD X 61.44 Y 61.44
! PIXELS X 4096 Y 4096
!
COLIMATOR LDSS3_COL 745.935
 SCALE 1.339107836816E-03
 RMOD 2 0.0 -1.488830086351E-06 -2.365672622993E-11
 FIELD R 88.0
 FOCCURV 0 -0.8090615
!
FOCUSER LDSS3_CAM 1.730757900129E+02
 SCALE 1.730757900129E+02
 RMOD 2 0.0 1.755637190879E-01 2.135446893793E+00
 FIELD R 43.5
 FOCCURV 0 0.0
!
INSTRUMENT LDSS3_NOR    LDSS3_COL  GRISM  LDSS3_CAM  LDSS3_CCD_NORMAL
INSTRUMENT LDSS3_MIC    LDSS3_COL  GRISM  LDSS3_CAM  LDSS3_CCD_MICRO
INSTRUMENT LDSS3_MAC    LDSS3_COL  GRISM  LDSS3_CAM  LDSS3_CCD_MACRO
INSTRUMENT LDSS3_D      LDSS3_COL  LDSS_direct_grism  LDSS3_CAM  LDSS3_CCD_NORMAL

!
!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!     end of new params for ldss-3     !!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
!
!!  ---  Revision History  ---
!
! 2010/02-01  Added latest GISMO data from 1-27 to 1-29 Engineering
! run.  Field limits and transform polynomials improved.
!
! 2008/09-08  Added the IMACS_grism_300R data, and PBL1Y glass data.
!  -- Start of revision history keeping.
!
! --- End of Optical Definitions File ---
#
# All lines here down are totally bogus; this is to debug error checking...
! grism  bad_grism  Nosuch_glass 15.5 169.75
! ! Gives error for glass not present
!   lines 330.0	# Should override the 169.75 junk
!   axis 1	! Should report x axis
! !
! glass  bad_poly 3 0.0 2.175625 3.34e-4
! glass  bad_poly2 1 0.0 2.175625 3.34e-4
! ! Bad counts in polynomial do not kill data reading, are not checked.
! !
! instrument bogus_inst. IMACS_col bad_grism nosuch_element Magellan
! ! Gives error on non-existing element
! !
! ! Remove these lines for real use
!
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# # # # # # # # # # #     Version History     # # # # # # # # # # # # #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
# # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # # #
!
! 2015/05/13 -- Version 1.52
!   Updated the tilt angle for the grating in MOE.
! 2014/07/17 -- Version 1.51
!  Added three new "instruments" (actually, 3 LDSS-3's with different
!  detector footprints) to implement the new LDSS3-C design with
!  two nod & shuffle modes (micro and macro)
! 2010/12-14 -- Version 1.50
!	Starting version for version tracking
!
 ! 2.13 9jPsI@bpxU7gkuX0u3cqRoEkUrC  MMxSEZSySxRpV5p0HkfO8nUUH3wuTQ@DBshPe_5INcze2T6yNAAQRncR0bBlIlVNJjfFMh8nYJtLAavtbdDOubQq5PgDzkVNh27zS9RyA7fUSLMZ9XrcD6603Dxud4WYF9gkBFv1z79of20jk3vCzmwo03xzMx60 
